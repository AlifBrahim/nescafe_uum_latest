<!DOCTYPE html>

<style>
	#coffee-container select[name="coffee[]"] option {
		color: black;
	}
	.btn-success {
		background-color: #28a745;
		color: #fff;
		border-color: #28a745;
	}

	.btn-success:hover {
		background-color: #218838;
		color: #fff;
		border-color: #1e7e34;
	}
</style>

<html lang="en">
	{% extends 'base.html' %}
	{% block content %}



    <section class="home-slider owl-carousel">

      <div class="slider-item" style="background-image: url(../static/images/bg_5.jpg);" data-stellar-background-ratio="0.5">
      	<div class="overlay"></div>
        <div class="container">
          <div class="row slider-text justify-content-center align-items-center">

            <div class="col-md-7 col-sm-12 text-center ftco-animate">
            	<span class="subheading">Our Menu</span>
            </div>

          </div>
        </div>
      </div>
    </section>

    <section class="ftco-intro">
    	<div class="container-wrap">
    		<div class="wrap d-md-flex align-items-xl-end">
	    		<div class="info">
	    			<div class="row no-gutters">
	    				<div class="col-md-4 d-flex ftco-animate">
	    					<div class="icon"><span class="icon-phone"></span></div>
	    					<div class="text">
	    						<h3>000 (123) 456 7890</h3>
	    						<p>Group 2</p>
	    					</div>
	    				</div>
	    				<div class="col-md-4 d-flex ftco-animate">
	    					<div class="icon"><span class="icon-my_location"></span></div>
	    					<div class="text">
	    						<h3>SBM UUM</h3>
	    						<p>	School of Business and Management, Universiti Utara Malaysia, Kedah, Malaysia</p>
	    					</div>
	    				</div>
	    				<div class="col-md-4 d-flex ftco-animate">
	    					<div class="icon"><span class="icon-clock-o"></span></div>
	    					<div class="text">
	    						<h3>Saturday - Thursday (except for Public Holidays)</h3>
	    						<p>9AM - 5PM</p>
	    					</div>
	    				</div>
	    			</div>
	    		</div>
	    		<!-- Booking Form -->
				<div class="book p-4">
					{% if messages %}
						{% for message in messages %}
							{% if "success" in message %}
								<div class="alert alert-success alert-dismissible fade show" role="alert">
									<p>Data added to the database successfully!</p>
									<button type="button" class="close" data-dismiss="alert" aria-label="Close">
										<span aria-hidden="true">&times;</span>
									</button>
								</div>
							{% elif "error" in message %}
								<div class="alert alert-danger alert-dismissible fade show" role="alert">
									<p>Failed to book. The quantity should be at least 30. </p>
									<button type="button" class="close" data-dismiss="alert" aria-label="Close">
										<span aria-hidden="true">&times;</span>
									</button>
								</div>
							{% endif %}
						{% endfor %}
					{% endif %}

	<h3 >Book Coffee for your event!</h3>
	<form action="/menu" method="POST" class="appointment-form">
		<div class="d-md-flex">
			<div class="form-group">
				<input type="text" class="form-control" placeholder="First Name" name="first_name">
			</div>
			<div class="form-group ml-md-4">
				<input type="text" class="form-control" placeholder="Last Name" name="last_name">
			</div>
		</div>
		<div class="d-md-flex">
			<div class="form-group">
				<input type="text" class="form-control" placeholder="Event Name" name="event_name">
			</div>
			<div class="form-group ml-md-4">
				<input type="text" class="form-control" placeholder="Location" name="location">
			</div>
		</div>

		<div id="coffee-container">
			<div class="coffee-entry">
				<div class="d-md-flex">
					<div class="form-group">
						<select class="form-control" name="coffee[]">
							<option value="original">Original</option>
							<option value="milktea">Milk Tea</option>
							<option value="hazelnuts">Hazelnuts</option>
							<option value="caramel">Caramel</option>
							<option value="mocha">Mocha</option>
							<option value="rich">Rich</option>

						</select>
					</div>
					<div class="form-group ml-md-4">
						<input type="number" class="form-control" placeholder="Quantity" name="quantity[]">
					</div>
					<div class="form-group ml-md-4">
						<button type="button" class="btn btn-success btn-sm add-coffee">+</button>
					</div>
				</div>
			</div>
		</div>

		<div class="d-md-flex">
			<div class="form-group">
				<div class="input-wrap">
					<div class="icon"><span class="ion-md-calendar"></span></div>
					<input type="text" class="form-control appointment_date" placeholder="Date" name="appointment_date">
				</div>
			</div>
			<div class="form-group ml-md-4">
				<div class="input-wrap">
					<div class="icon"><span class="ion-ios-clock"></span></div>
					<input type="text" class="form-control appointment_time" placeholder="Time" name="appointment_time">
				</div>
			</div>
			<div class="form-group ml-md-4">
				<input type="text" class="form-control" placeholder="Phone" name="phone">
			</div>
		</div>
		<div class="d-md-flex">
			<div class="form-group">
				<textarea name="message" id="" cols="30" rows="2" class="form-control" placeholder="Message"></textarea>
			</div>
			<div class="form-group ml-md-4">
				<input type="submit" value="Book" class="btn btn-white py-3 px-4">
			</div>
		</div>
	</form>
</div>

<!-- End of Booking Form -->


	<!-- Add this in the head section of your HTML file -->
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.18/dist/sweetalert2.all.min.js"></script>
  	<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>




    		</div>
    	</div>
    </section>

    <section class="ftco-menu mb-5 pb-5">
    	<div class="container">
    		<div class="row justify-content-center mb-5">
          <div class="col-md-7 heading-section text-center ftco-animate">
          	<span class="subheading">Discover</span>
            <h2 class="mb-4">Our Products</h2>
            <p>Having developed a way to make a quality cup of coffee simply by adding boiling water, NESCAFÉ® coffee was launched in Switzerland in 1938.</p>
          </div>
        </div>
    		<div class="row d-md-flex">
	    		<div class="col-lg-12 ftco-animate p-md-5">
		    		<div class="row">

		          <div class="col-md-12 d-flex align-items-center">

		            <div class="tab-content ftco-animate" id="v-pills-tabContent">

		                <div class="row">
		              		<div class="col-md-4 text-center">
		              			<div class="menu-wrap">
		              				<a class="menu-img img mb-4" style="background-image: url(../static/images/original.jpg);"></a>
		              				<div class="text">
		              					<h3><a>Original</a></h3>
		              					<p>A rich and smooth instant coffee blend that delivers a satisfying taste to start your day right.</p>
		              					<p class="price"><span>RM 2.50</span></p>
<p><a class="btn btn-primary btn-outline-primary add-to-cart">Add to cart</a></p>
		              				</div>
		              			</div>
		              		</div>
		              		<div class="col-md-4 text-center">
		              			<div class="menu-wrap">
		              				<a class="menu-img img mb-4" style="background-image: url(../static/images/milktea.jpg);"></a>
		              				<div class="text">
		              					<h3><a >Milk Tea</a></h3>
		              					<p>Discover the creamy indulgence of milk tea infused with the delightful aroma and smoothness of Nescafé.</p>
		              					<p class="price"><span>RM 2.50</span></p>
<p><a class="btn btn-primary btn-outline-primary add-to-cart">Add to cart</a></p>
		              				</div>
		              			</div>
		              		</div>
		              		<div class="col-md-4 text-center">
		              			<div class="menu-wrap">
		              				<a class="menu-img img mb-4" style="background-image: url(../static/images/hazelnut.jpeg);"></a>
		              				<div class="text">
		              					<h3><a>Hazelnuts</a></h3>
		              					<p>Indulge in the delightful fusion of smooth coffee and the irresistible aroma of roasted hazelnuts. A truly flavorful experience.</p>
		              					<p class="price"><span>RM 2.50</span></p>
<p><a class="btn btn-primary btn-outline-primary add-to-cart">Add to cart</a></p>
		              				</div>
		              			</div>
		              		</div>
		              		<div class="col-md-4 text-center">
		              			<div class="menu-wrap">
		              				<a class="menu-img img mb-4" style="background-image: url(../static/images/NesCaramel.jpg);"></a>
		              				<div class="text">
		              					<h3><a>Caramel</a></h3>
		              					<p> Experience the perfect balance of smooth coffee and luscious caramel flavor, creating a deliciously sweet and comforting cup.</p>
		              					<p class="price"><span>RM 2.50</span></p>
<p><a class="btn btn-primary btn-outline-primary add-to-cart">Add to cart</a></p>
		              				</div>
		              			</div>
		              		</div>
		              		<div class="col-md-4 text-center">
		              			<div class="menu-wrap">
		              				<a class="menu-img img mb-4" style="background-image: url(../static/images/Mocha.jpg);"></a>
		              				<div class="text">
		              					<h3><a>Mocha</a></h3>
		              					<p>A harmonious blend of rich coffee and indulgent chocolate, offering a delightful combination of flavors in every sip.</p>
		              					<p class="price"><span>RM 2.50</span></p>
<p><a class="btn btn-primary btn-outline-primary add-to-cart">Add to cart</a></p>
		              				</div>
		              			</div>
		              		</div>
		              		<div class="col-md-4 text-center">
		              			<div class="menu-wrap">
		              				<a href="#" class="menu-img img mb-4" style="background-image: url(../static/images/Rich.jpg);" ></a>
		              				<div class="text">
		              					<h3><a href="#">Rich</a></h3>
		              					<p> Immerse yourself in the bold and robust flavor of Nescafé Rich, a coffee that delivers a satisfyingly intense and full-bodied taste.</p>
		              					<p class="price"><span>RM 2.50</span></p>
<p><a class="btn btn-primary btn-outline-primary add-to-cart">Add to cart</a></p>
		              				</div>
		              			</div>
		              		</div>
		              	</div>
		              </div>
				  	</div>
					</div>
		            </div>
		          </div>
		        </div>
		      </div>
		    </div>
    	</div>
    </section>
	  <script>
    function submitForm(event) {
        event.preventDefault(); // Prevent the default form submission

        // Get the form inputs
        var first_name = document.getElementById('first_name').value;
        var last_name = document.getElementById('last_name').value;
        var quantity = parseInt(document.getElementById('quantity').value);

        // Perform the validation
        if (quantity < 30) {
            alert("Failed to book. The quantity should be at least 30.");
        } else {
            // If validation passes, submit the form
            document.getElementById('menu_form').submit();
            alert("Successfully booked!");
        }
    }

    document.addEventListener("DOMContentLoaded", function() {
        let cartCount = 0;
        const addToCartButtons = document.querySelectorAll('.btn-primary.btn-outline-primary');
        const cartIcon = document.querySelector('.cart .bag small');
        let cartItems = [];

        // Retrieve cartItems and cartCount from localStorage on page load
        window.addEventListener('load', () => {
            cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];
            cartCount = parseInt(localStorage.getItem('cartCount')) || 0;
            cartIcon.textContent = cartCount;
            updateCartButtons();
        });

        addToCartButtons.forEach(button => {
    button.addEventListener('click', event => {
        const item = event.target.closest('.menu-wrap');
        const itemName = item.querySelector('h3 a').textContent;
        const itemPrice = item.querySelector('.price span').textContent;

        const existingItemIndex = cartItems.findIndex(cartItem => cartItem.name === itemName);
        if (existingItemIndex > -1) {
            // Increase the quantity of the existing item
            cartItems[existingItemIndex].quantity++;
            localStorage.setItem('cartItems', JSON.stringify(cartItems));
            console.log('Increased quantity of existing item:', cartItems[existingItemIndex]);
        } else {
            // Add a new item to the cart
            const newItem = { name: itemName, price: itemPrice, quantity: 1 };
            cartItems.push(newItem);
            localStorage.setItem('cartItems', JSON.stringify(cartItems));
            console.log('New item added:', newItem);
        }

        // Update cart count and buttons
        updateCartCount();
        updateCartButtons();

        // Show the "Successfully added!" pop-up message using SweetAlert
        Swal.fire({
            icon: 'success',
            title: 'Successfully added!',
            showConfirmButton: false,
            timer: 1500
        });
    });
});
		function updateCartCount() {
    let count = 0;
    for (const item of cartItems) {
        count += item.quantity;
    }
    localStorage.setItem('cartCount', count);
    cartIcon.textContent = count;
}



        function updateCartButtons() {
    addToCartButtons.forEach(button => {
        const item = button.closest('.menu-wrap');
        const itemName = item.querySelector('h3 a').textContent;

        const existingItem = cartItems.find(cartItem => cartItem.name === itemName);
        if (existingItem) {
            button.textContent = `Add to cart (${existingItem.quantity})`;
        } else {
            button.textContent = 'Add to cart';
        }
    });
}


        console.log('cartItems: ', cartItems);
    });
</script>

</html>
	{% endblock %}